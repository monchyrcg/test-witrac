<ng-container *ngIf="customer$ | async; else loading; let customer$">

    <div class="px-4 pt-6 sm:px-6 lg:px-8">
        <div class="lg:flex lg:items-center lg:justify-between">
            <div class="flex-1 min-w-0">
                <h2 class="text-2xl font-bold leading-7 text-gray-900
                    sm:text-3xl sm:leading-9 sm:truncate">
                    {{customer$.name}} {{customer$.surnames}}
                </h2>
                <div class="mt-1 flex flex-col sm:mt-0 sm:flex-row
                    sm:flex-wrap">

                    <div class="customer-info sm:mr-6">
                        <!-- Heroicon name: location-marker -->
                        <svg class="customer-info-svg" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2"
                                d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16
                                0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1
                                1 0 00-.707.293l-2.414 2.414a1 1 0
                                01-.707.293h-3.172a1 1 0
                                01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4">
                            </path>
                        </svg>
                        {{customer$.email}}
                    </div>

                    <div class="customer-info">
                        <!-- Heroicon name: calendar -->
                        <svg class="customer-info-svg" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2"
                                d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2
                                2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                            </path>
                        </svg>
                        {{ 'customer_edit.next_appointment' | translate }}
                        {{customer$.next_appointment ?
                        ((customer$.next_appointment.date+'
                        '+customer$.next_appointment.hour) | date: 'short' : ''
                        : ((settingGeneralService.changeCountry$
                        | async).locale)) : 'N/A'}}
                    </div>
                </div>
            </div>

            <div class="mt-5 flex lg:mt-0 lg:ml-4">
                <span class="hidden lg:block shadow-sm rounded-md">
                    <button (click)="createAppointment()" type="button"
                        class="customer-info-button-white">
                        <!-- Heroicon name: pencil -->
                        <img class="customer-info-button-svg text-gray-500"
                            src="assets/images/svg/pencil.svg"
                            />
                        {{ 'customer_edit.appointment' | translate }}
                    </button>
                </span>

                <span class="hidden lg:block ml-3 shadow-sm rounded-md">
                    <button type="button" class="customer-info-button-white">
                        <!-- Heroicon name: link -->
                        <svg class="customer-info-button-svg text-gray-500"
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0
                                01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656
                                0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0
                                101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1
                                0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0
                                105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5
                                1.5a2 2 0 11-2.828-2.828l3-3z"
                                clip-rule="evenodd" />
                            </svg>
                            {{ 'customer_edit.message' | translate }}
                        </button>
                    </span>

                    <span class="ml-3 relative shadow-sm rounded-md lg:hidden">
                        <button type="button" class="customer-info-button-white"
                            (click)="isOpen= !isOpen">
                            {{ 'customer_edit.more' | translate }}
                            <!-- Heroicon name: chevron-down -->
                            <svg class="-mr-1 h-5 w-5 ml-2text-gray-500"
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M5.293 7.293a1 1 0 011.414 0L10
                                    10.586l3.293-3.293a1 1 0 111.414 1.414l-4
                                    4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                    clip-rule="evenodd" />
                                </svg>
                            </button>

                            <div class="origin-top-right absolute right-0 mt-2
                                -mr-1 w-48 rounded-md shadow-lg transition
                                ease-out duration-200"
                                aria-labelledby="mobile-menu" role="menu"
                                *ngIf="isOpen">
                                <div class="py-1 rounded-md bg-white ring-1
                                    ring-black ring-opacity-5">
                                    <a (click)="createAppointment()"
                                        class="block px-4 py-2 text-sm leading-5
                                        text-gray-700 hover:bg-gray-100
                                        focus:outline-none focus:bg-gray-100
                                        transition duration-150 ease-in-out"
                                        role="menuitem">
                                        {{ 'customer_edit.appointment' | translate }}
                                    </a>
                                    <a class="block px-4 py-2 text-sm leading-5
                                        text-gray-700 hover:bg-gray-100
                                        focus:outline-none focus:bg-gray-100
                                        transition duration-150 ease-in-out"
                                        role="menuitem">
                                        {{ 'customer_edit.message' | translate }}
                                    </a>
                                </div>
                            </div>
                        </span>
                    </div>
                </div>
            </div>

            <app-tabs>
                <app-tab title="{{ 'customer_edit.tabs.data' | translate }}">
                    <app-customer-edit-general [customer]="customer$"></app-customer-edit-general>
                </app-tab>

                <app-tab title="Historial Médico">
                    <app-customer-edit-medical-history
                        [customer_id]="customer$.id"
                        [medical]="customer$.medical">
                    </app-customer-edit-medical-history>
                </app-tab>

                <app-tab title="Appointments">
                    <app-customer-edit-appointments [customer]="customer$"
                        (reloadCustomer)="reloadCustomer()">
                    </app-customer-edit-appointments>
                </app-tab>

                <!-- <app-tab title="Antropométricos">
            <div echarts [options]="options2" class="demo-chart"></div>
            <div echarts [options]="options3" class="demo-chart"></div>
            <div echarts [options]="options" class="demo-chart"></div>
        </app-tab> -->
            </app-tabs>

        </ng-container>

        <ng-template #loading>
            <app-loading></app-loading>
        </ng-template>